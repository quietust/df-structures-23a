<data-definition>
    <struct-type type-name='historical_kills'>
        -- Important

        <stl-vector name="events">
            <int32_t ref-target='history_event'/>
        </stl-vector>

        -- Misc

        <stl-vector name="killed_race">
            <int16_t ref-target='creature_raw'/>
        </stl-vector>
        <stl-vector name="killed_caste">
            <int16_t ref-target='caste_raw' aux-value='$$._parent.killed_race[$._key]'/>
        </stl-vector>
        <stl-vector name="unk_30">
            <int32_t comment='-1'/>
        </stl-vector>
        <stl-vector name="unk_40">
            <int32_t comment='-1'/>
        </stl-vector>
        <stl-vector name="killed_site">
            <int32_t ref-target='world_site'/>
        </stl-vector>
        <stl-vector name="killed_undead">
            <bitfield base-type='uint16_t'>
                <flag-bit name='skeletal'/>
                <flag-bit name='zombie'/>
                <flag-bit name='ghostly'/>
            </bitfield>
        </stl-vector>
        <stl-vector name="killed_count" type-name='int32_t'/>
    </struct-type>

    <struct-type type-name='history_hit_item'>
        <int32_t name='item' ref-target='item'/>
        <enum base-type='int16_t' name='item_type' type-name='item_type'/>
        <int16_t name='item_subtype' refers-to='(item-subtype-target $$._parent.item_type $)'/>

        <int16_t name='mattype' ref-target='material' aux-value='$$.matindex'/>
        <int32_t name='matindex'/>

        -- If shot by a ranged weapon:
        <int32_t name='bow_item' ref-target='item'/>
        <enum base-type='int16_t' name='bow_item_type' type-name='item_type'/>
        <int16_t name='bow_item_subtype' refers-to='(item-subtype-target $$._parent.bow_item_type $)'/>
        <int16_t name='bow_mattype' ref-target='material' aux-value='$$.bow_matindex'/>
        <int32_t name='bow_matindex'/>
    </struct-type>

    <struct-type type-name='historical_figure_info'>
        <pointer name="spheres">
            <stl-vector>
                <enum base-type='int16_t' type-name='sphere_type'/>
            </stl-vector>
        </pointer>

        <pointer name="skills">
            <stl-vector name="skills">
                <enum base-type='int16_t' type-name='job_skill'/>
            </stl-vector>
            <stl-vector name="points" index-refers-to='$$._parent.skills[$]'>
                <int32_t/>
            </stl-vector>
            <stl-vector name="unk_20">
                <int16_t/>
            </stl-vector>
            <stl-vector name="unk_30">
                <int32_t/>
            </stl-vector>
            <stl-vector name="unk_40" type-name='int16_t'/>
            <stl-vector name="unk_50" type-name='int16_t'/>
            <int16_t name="unk_60"/>
        </pointer>

        <pointer name="pets">
            <stl-vector>
                <int16_t ref-target='creature_raw'/>
            </stl-vector>
        </pointer>

        <pointer name="unk_c">
            <static-array type-name='uint16_t' name='traits'
                          count='30' index-enum='personality_facet_type'/>
            <stl-vector name="unk_3c">
                <pointer>
                    <int16_t name='a'/>
                    <int16_t name='b'/>
                </pointer>
            </stl-vector>
            <stl-vector name="unk_4c">
                <int16_t/>
            </stl-vector>
            <stl-vector name="unk_5c" comment='v0.34.01'/>
        </pointer>

        <pointer name="masterpieces">
            <stl-vector name="events">
                <int32_t ref-target='history_event'/>
            </stl-vector>
            <stl-vector name="events2" comment='ones that were stolen??..'>
                <int32_t ref-target='history_event'/>
            </stl-vector>
        </pointer>

        <pointer name="unk_14">
            <int16_t name="unk_0"/>
            <int32_t name="site" ref-target='world_site'/>
            <int32_t name="unk_8"/>
            <int32_t name="unk_c"/>
            <compound name='region' type-name='coord2d'/>
            <int8_t name="unk_14"/>
            <int32_t name="unk_18"/>
            <int32_t name="unk_1c"/>
        </pointer>

        <pointer name="kills" type-name='historical_kills'/>

        <pointer name="wounds">
            <stl-vector name="events">
                <int32_t ref-target='history_event'/>
            </stl-vector>
            <stl-bit-vector name="status">
                <code-helper name='index-refers-to'>
                    (let* ((info $$._parent._parent._parent)
                           (figure $info._parent._parent)
                           (caste (find-instance $caste_raw $figure.caste $figure.race)))
                      $caste.body_parts[$])
                </code-helper>
            </stl-bit-vector>
        </pointer>

        <pointer name='secret' comment='v0.34.01'>
            <stl-vector name="interactions">
                <pointer type-name='interaction'/>
            </stl-vector>
            <int32_t name="unk_10"/>
            <stl-vector name="unk_14"/>
        </pointer>

        <pointer name='curse' comment='v0.34.01'>
            <stl-vector name="active_interactions">
                <pointer type-name='interaction'/>
            </stl-vector>
            <stl-vector name="active_effects">
                <pointer/>
            </stl-vector>
            <stl-vector name="can_do">
                <pointer type-name='interaction'/>
            </stl-vector>
            <int16_t name="unk_30"/>
            <int16_t name="unk_32"/>
            <int32_t name="unk_34"/>
            <int32_t name="unk_38"/>
            <int32_t name="unk_3c"/>
            <int8_t name="unk_40"/>
            <stl-string name="name"/>
            <stl-string name="name_plural"/>
            <stl-string name="name_adjective"/>
            <int32_t name='race' ref-target='creature_raw'/>
            <int16_t name='caste' ref-target='caste_raw' aux-value='$$.race'/>
            <stl-vector name="unk_a0"/>
            <stl-vector name="unk_b0"/>
            <stl-vector name="unk_c0">
                <int32_t/>
            </stl-vector>
            <int32_t name="unk_d0"/>
            <int32_t name="unk_d4"/>
            <int32_t name="unk_d8"/>
            <int32_t name="unk_dc"/>
            <stl-string name="unk_e0"/>
            <int32_t name="unk_fc"/>
        </pointer>

        <pointer name='books' comment='v0.34.01'>
            <stl-vector>
                <pointer type-name='artifact_record'/>
            </stl-vector>
        </pointer>

        <pointer name='reputation' comment='v0.34.01'>
            <stl-vector name="wanted">
                <pointer>
                    <int32_t name='entity_id' ref-target='historical_entity'/>
                    <int32_t name="discovered_year"/>
                    <int32_t name="discovered_time"/>
                    <int32_t name="unsolved_murders"/>
                </pointer>
            </stl-vector>
            <int32_t name="cur_identity" ref-target='assumed_identity'/>
            <stl-vector name="all_identities">
                <int32_t ref-target='assumed_identity'/>
            </stl-vector>
        </pointer>
    </struct-type>

    <struct-type type-name='historical_figure' instance-vector='$global.world.history.figures' key-field='id'>
        <enum base-type='int16_t' name='profession' type-name='profession'/>

        <int16_t name='race' ref-target='creature_raw'/>
        <int16_t name='caste' ref-target='caste_raw' aux-value='$$.race'/>

        <int8_t name='sex' comment='-1 n/a, 0 female, 1 male'/>

        <int32_t name='appeared_year'/>
        <int32_t name='born_year'/>
        <int32_t name='born_seconds'/>
        <int32_t name='curse_year' comment='v0.34.01'/>
        <int32_t name='curse_seconds' comment='v0.34.01'/>

        <int32_t comment='v0.34.01'/>
        <int32_t comment='v0.34.01'/>

        <int32_t name='old_year'/>
        <int32_t name='old_seconds'/>
        <int32_t name='died_year'/>
        <int32_t name='died_seconds'/>

        <compound type-name='language_name' name='name'/>

        <code-helper name='describe'>
            (describe-obj $.name)
            (awhen (find-creature $.race)
              (fmt "~:(~A ~A~)" $it.caste[$.caste].caste_id $it.creature_id))
        </code-helper>

        <int32_t name='civ_id' ref-target='historical_entity'/>
        <int32_t name='population_id' ref-target='entity_population'/>

        <int32_t comment='v0.34.01'/>

        <df-flagarray name='flags'/>

        <int32_t name='unit_id' ref-target='unit'/>
        <int32_t name='id'/>

        <int32_t name='unk4'/>

        <stl-vector name='entity_links'>
            <pointer type-name='histfig_entity_link'/>
        </stl-vector>
        <stl-vector name='site_links'>
            <pointer type-name='histfig_site_link'/>
        </stl-vector>
        <stl-vector name='histfig_links'>
            <pointer type-name='histfig_hf_link'/>
        </stl-vector>

        <pointer name='info' type-name='historical_figure_info'/>

        <compound name='worldgen'>
            <pointer name="unk_0" type-name="world_site"/>
            <pointer name="unk_4" type-name="language_name"/>
            <pointer name="unk_8" type-name="world_underground_region"/>
            <pointer name="unk_c">
                <df-array name="unk_0" type-name='uint8_t'/>
                <df-array name="unk_8" type-name='int16_t'/>
            </pointer>
            <int32_t name="unk_10"/>
        </compound>
    </struct-type>

    <struct-type type-name='assumed_identity'
                 instance-vector='$global.world.assumed_identities.all' key-field='id'>
        dtor 0x8C17FA0

        <int32_t name='id'/>
        <compound name='name' type-name='language_name'/>

        <code-helper name='describe'>
            (describe-obj $.name)
            (awhen (find-creature $.race)
              (fmt "~:(~A ~A~)" $it.caste[$.caste].caste_id $it.creature_id))
        </code-helper>

        <int32_t name='race' ref-target='creature_raw'/>
        <int16_t name='caste' ref-target='caste_raw' aux-value='$$.race'/>

        <int32_t name='histfig_id' ref-target='historical_figure'
                 comment='when masquerading as another historical figure'/>
        <int32_t/>

        <int32_t name='birth_year' comment='the fake one, that is'/>
        <int32_t name='birth_second'/>
    </struct-type>

    <enum-type type-name='history_event_type'>
        <enum-item name='WAR_ATTACKED_SITE'/>
        <enum-item name='WAR_DESTROYED_SITE'/>
        <enum-item name='CREATED_SITE'/>
        <enum-item name='HIST_FIGURE_DIED'/>
        <enum-item name='ADD_HF_ENTITY_LINK'/>
        <enum-item name='REMOVE_HF_ENTITY_LINK'/>
        <enum-item name='FIRST_CONTACT'/>
        <enum-item name='FIRST_CONTACT_FAILED'/>
        <enum-item name='TOPICAGREEMENT_CONCLUDED'/>
        <enum-item name='TOPICAGREEMENT_REJECTED'/>
        <enum-item name='TOPICAGREEMENT_MADE'/>
        <enum-item name='WAR_PEACE_ACCEPTED'/>
        <enum-item name='WAR_PEACE_REJECTED'/>
        <enum-item name='DIPLOMAT_LOST'/>
        <enum-item name='AGREEMENTS_VOIDED'/>
        <enum-item name='MERCHANT'/>
        <enum-item name='ARTIFACT_HIDDEN'/>
        <enum-item name='ARTIFACT_POSSESSED'/>
        <enum-item name='ARTIFACT_CREATED'/>
        <enum-item name='ARTIFACT_LOST'/>
        <enum-item name='ARTIFACT_FOUND'/>
        <enum-item name='ARTIFACT_RECOVERED'/>
        <enum-item name='ARTIFACT_DROPPED'/>
        <enum-item name='RECLAIM_SITE'/>
        <enum-item name='HF_DESTROYED_SITE'/>
        <enum-item name='SITE_DIED'/>
        <enum-item name='SITE_ABANDONED'/>
        <enum-item name='ENTITY_CREATED'/>
        <enum-item name='ENTITY_ACTION'/>
        <enum-item name='ENTITY_INCORPORATED'/>
        <enum-item name='CREATED_BUILDING'/>
        <enum-item name='REPLACED_BUILDING'/>
        <enum-item name='ADD_HF_SITE_LINK'/>
        <enum-item name='REMOVE_HF_SITE_LINK'/>
        <enum-item name='ADD_HF_HF_LINK'/>
        <enum-item name='REMOVE_HF_HF_LINK'/>
        <enum-item name='ENTITY_RAZED_BUILDING'/>
        <enum-item name='MASTERPIECE_CREATED_ARCH_DESIGN'/>
        <enum-item name='MASTERPIECE_CREATED_ARCH_CONSTRUCT'/>
        <enum-item name='MASTERPIECE_CREATED_ITEM'/>
        <enum-item name='MASTERPIECE_CREATED_DYE_ITEM'/>
        <enum-item name='MASTERPIECE_CREATED_ITEM_IMPROVEMENT'/>
        <enum-item name='MASTERPIECE_CREATED_FOOD'/>
        <enum-item name='MASTERPIECE_CREATED_ENGRAVING'/>
        <enum-item name='MASTERPIECE_LOST'/>
        <enum-item name='CHANGE_HF_STATE'/>
        <enum-item name='CHANGE_HF_JOB'/>
        <enum-item name='WAR_FIELD_BATTLE'/>
        <enum-item name='WAR_PLUNDERED_SITE'/>
        <enum-item name='WAR_SITE_NEW_LEADER'/>
        <enum-item name='WAR_SITE_TRIBUTE_FORCED'/>
        <enum-item name='WAR_SITE_TAKEN_OVER'/>
        <enum-item name='BODY_ABUSED'/>
        <enum-item name='HIST_FIGURE_ABDUCTED'/>
        <enum-item name='ITEM_STOLEN'/>
        <enum-item name='HF_RAZED_BUILDING'/>
        <enum-item name='CREATURE_DEVOURED'/>
        <enum-item name='HIST_FIGURE_WOUNDED'/>
        <enum-item name='HIST_FIGURE_SIMPLE_BATTLE_EVENT'/>
        <enum-item name='CREATED_WORLD_CONSTRUCTION'/>
        <enum-item name='HIST_FIGURE_REUNION'/>
        <enum-item name='HIST_FIGURE_REACH_SUMMIT'/>
        <enum-item name='HIST_FIGURE_TRAVEL'/>
        <enum-item name='HIST_FIGURE_NEW_PET'/>
        <enum-item name='ASSUME_IDENTITY'/>
        <enum-item name='CREATE_ENTITY_POSITION'/>
        <enum-item name='CHANGE_CREATURE_TYPE'/>
        <enum-item name='HIST_FIGURE_REVIVED'/>
        <enum-item name='HF_LEARNS_SECRET'/>
        <enum-item name='CHANGE_HF_BODY_STATE'/>
        <enum-item name='HF_ACT_ON_BUILDING'/>
        <enum-item name='HF_DOES_INTERACTION'/>
        <enum-item name='HF_CONFRONTED'/>
        <enum-item name='ENTITY_LAW'/>
        <enum-item name='HF_GAINS_SECRET_GOAL'/>
        <enum-item name='ARTIFACT_STORED'/>
    </enum-type>

    <class-type type-name='history_event' original-name='history_eventst'
                instance-vector='$global.world.history.events' key-field='id'>
        <int32_t name='year'/>
        <int32_t name='seconds'/>
        <df-flagarray name='flags'/>
        <int32_t name='id'/>

        <virtual-methods>
            <vmethod ret-type='history_event_type' name='getType'/>
            <vmethod/>
            <vmethod/>
            <vmethod/>
            <vmethod/>

            <vmethod/>
            <vmethod/>
            <vmethod/>
            <vmethod/>
            <vmethod/>

            -- 10

            <vmethod/>
            <vmethod/>
            <vmethod/>
            <vmethod/>
            <vmethod/>

            <vmethod/>
            <vmethod/>
            <vmethod/>
            <vmethod/>
            <vmethod/>

            -- 20

            <vmethod/>
            <vmethod/>
            <vmethod/>
            <vmethod/>
            <vmethod/>

            <vmethod/>
            <vmethod/>
            <vmethod/>
            <vmethod/>
            <vmethod/>

            -- 30

            <vmethod/>
            <vmethod/>
            <vmethod/>
            <vmethod/>
            <vmethod name='generate_xml'>
                <pointer/>
                <pointer/>
            </vmethod>

            <vmethod name='write_file'> <pointer comment='file_compressorst'/> </vmethod>
            <vmethod name='read_file'>
                <pointer comment='file_compressorst'/>
                <int32_t name='loadversion'/>
            </vmethod>
            <vmethod/>
            <vmethod is-destructor='true'/>
        </virtual-methods>
    </class-type>

    <class-type type-name='history_event_war_attacked_sitest' inherits-from='history_event'>
        <int32_t/>
        <int32_t/>
        <int32_t/>
        <int32_t/>
        <int32_t/>
        <int32_t/>
    </class-type>

    <class-type type-name='history_event_war_destroyed_sitest' inherits-from='history_event'>
        <int32_t/>
        <int32_t/>
        <int32_t/>
        <int32_t/>
    </class-type>

    <class-type type-name='history_event_created_sitest' inherits-from='history_event'>
        <int32_t name='civ_id' ref-target='historical_entity'/>
        <int32_t name='group_id' ref-target='historical_entity'/>
        <int32_t name='site_id' ref-target='world_site'/>
    </class-type>

    <class-type type-name='history_event_hist_figure_diedst' inherits-from='history_event'>
        <int32_t name='hfid' ref-target='historical_figure'/>

        <int32_t name='slayer' ref-target='historical_figure'/>
        <int32_t name='slayer_race' ref-target='creature_raw'/>
        <int32_t name='slayer_caste' ref-target='caste_raw' aux-value='$$.slayer_race'/>

        <compound name='weapon' type-name='history_hit_item'/>

        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='region' ref-target='world_region'/>
        <int32_t name='layer' ref-target='world_underground_region' comment='?'/>

        <int16_t name='death_cause'/>
    </class-type>

    <class-type type-name='history_event_add_hf_entity_linkst' inherits-from='history_event'>
        <int32_t name='entity_id' ref-target='historical_entity'/>
        <int32_t name='hfid' ref-target='historical_figure'/>
        <int32_t/>
        <int32_t/>
    </class-type>

    <class-type type-name='history_event_remove_hf_entity_linkst' inherits-from='history_event'>
        <int32_t name='entity_id' ref-target='historical_entity'/>
        <int32_t name='hfid' ref-target='historical_figure'/>
        <int32_t/>
        <int32_t/>
    </class-type>

    <class-type type-name='history_event_first_contactst' inherits-from='history_event'>
        <int32_t/>
        <int32_t/>
        <int32_t/>
    </class-type>

    <class-type type-name='history_event_first_contact_failedst' inherits-from='history_event'>
        <int32_t/>
        <int32_t/>
        <int32_t/>
    </class-type>

    <class-type type-name='history_event_topicagreement_concludedst' inherits-from='history_event'>
        <int32_t/>
        <int32_t/>
        <int32_t/>
        <int16_t/>
        <int32_t/>
    </class-type>

    <class-type type-name='history_event_topicagreement_rejectedst' inherits-from='history_event'>
        <int16_t/>
        <int32_t/>
        <int32_t/>
        <int32_t/>
    </class-type>

    <class-type type-name='history_event_topicagreement_madest' inherits-from='history_event'>
        <int16_t/>
        <int32_t/>
        <int32_t/>
        <int32_t/>
    </class-type>

    <class-type type-name='history_event_war_peace_acceptedst' inherits-from='history_event'>
        <int16_t/>
        <int32_t/>
        <int32_t/>
        <int32_t/>
    </class-type>

    <class-type type-name='history_event_war_peace_rejectedst' inherits-from='history_event'>
        <int16_t/>
        <int32_t/>
        <int32_t/>
        <int32_t/>
    </class-type>

    <class-type type-name='history_event_diplomat_lostst' inherits-from='history_event'>
        <int32_t/>
        <int32_t/>
        <int32_t/>
    </class-type>

    <class-type type-name='history_event_agreements_voidedst' inherits-from='history_event'>
        <int32_t/>
        <int32_t/>
    </class-type>

    <class-type type-name='history_event_merchantst' inherits-from='history_event'>
        <int32_t/>
        <int32_t/>
        <int32_t/>
        <int32_t/>
        <int32_t/>
    </class-type>

    <class-type type-name='history_event_artifact_hiddenst' inherits-from='history_event'>
        <int32_t/>
        <int32_t/>
        <int32_t/>
        <int32_t/>
    </class-type>

    <class-type type-name='history_event_artifact_possessedst' inherits-from='history_event'>
        <int32_t/>
        <int32_t/>
        <int32_t/>
        <int32_t/>
    </class-type>

    <class-type type-name='history_event_artifact_createdst' inherits-from='history_event'>
        <int32_t name='artifact_id' ref-target='artifact_record'/>
        <int32_t name='unit_id' ref-target='unit'/>
        <int32_t name='hfid' ref-target='historical_figure'/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t/>
    </class-type>

    <class-type type-name='history_event_artifact_lostst' inherits-from='history_event'>
        <int32_t/>
        <int32_t/>
    </class-type>

    <class-type type-name='history_event_artifact_foundst' inherits-from='history_event'>
        <int32_t/>
        <int32_t/>
        <int32_t/>
        <int32_t/>
    </class-type>

    <class-type type-name='history_event_artifact_recoveredst' inherits-from='history_event'>
        <int32_t/>
        <int32_t/>
        <int32_t/>
        <int32_t/>
    </class-type>

    <class-type type-name='history_event_artifact_droppedst' inherits-from='history_event'>
        <int32_t/>
        <int32_t/>
        <int32_t/>
        <int32_t/>
        <int32_t/>
        <int32_t/>
    </class-type>

    <class-type type-name='history_event_reclaim_sitest' inherits-from='history_event'>
        <int32_t/>
        <int32_t/>
        <int32_t/>
    </class-type>

    <class-type type-name='history_event_hf_destroyed_sitest' inherits-from='history_event'>
        <int32_t/>
        <int32_t/>
        <int32_t/>
        <int32_t/>
    </class-type>

    <class-type type-name='history_event_site_diedst' inherits-from='history_event'>
        <int32_t/>
        <int32_t/>
        <int32_t/>
    </class-type>

    <class-type type-name='history_event_site_abandonedst' inherits-from='history_event'>
        <int32_t/>
        <int32_t/>
        <int32_t/>
    </class-type>

    <class-type type-name='history_event_entity_createdst' inherits-from='history_event'>
        <int32_t/>
        <int32_t/>
        <int32_t/>
    </class-type>

    <class-type type-name='history_event_entity_actionst' inherits-from='history_event'>
        <int32_t/>
        <int32_t/>
        <int32_t/>
        <int32_t/>
    </class-type>

    <class-type type-name='history_event_entity_incorporatedst' inherits-from='history_event'>
        <int32_t/>
        <int32_t/>
        <int32_t/>
    </class-type>

    <class-type type-name='history_event_created_buildingst' inherits-from='history_event'>
        <int32_t/>
        <int32_t/>
        <int32_t/>
        <int32_t/>
    </class-type>

    <class-type type-name='history_event_replaced_buildingst' inherits-from='history_event'>
        <int32_t/>
        <int32_t/>
        <int32_t/>
        <int32_t/>
        <int32_t/>
    </class-type>

    <class-type type-name='history_event_add_hf_site_linkst' inherits-from='history_event'>
        <int32_t/>
        <int32_t/>
        <int32_t/>
        <int32_t/>
        <int32_t/>
    </class-type>

    <class-type type-name='history_event_remove_hf_site_linkst' inherits-from='history_event'>
        <int32_t/>
        <int32_t/>
        <int32_t/>
        <int32_t/>
        <int32_t/>
    </class-type>

    <class-type type-name='history_event_add_hf_hf_linkst' inherits-from='history_event'>
        <int32_t name='hfid' ref-target='historical_figure'/>
        <int32_t name='hfid2' ref-target='historical_figure'/>
        <enum base-type='int32_t' name='type' type-name='histfig_hf_link_type'/>
    </class-type>

    <class-type type-name='history_event_remove_hf_hf_linkst' inherits-from='history_event'>
        <int32_t/>
        <int32_t/>
        <int32_t/>
    </class-type>

    <class-type type-name='history_event_entity_razed_buildingst' inherits-from='history_event'>
        <int32_t/>
        <int32_t/>
        <int32_t/>
    </class-type>


    <class-type type-name='history_event_masterpiece_createdst' inherits-from='history_event'>
        <int32_t name='maker' ref-target='historical_figure'/>
        <int32_t name='maker_entity' ref-target='historical_entity'/>
        <int32_t name='site' ref-target='world_site'/>
    </class-type>

    <class-type type-name='history_event_masterpiece_created_arch_designst' inherits-from='history_event_masterpiece_createdst'>
        <int32_t/>
        <int16_t/>
        <int16_t/>
        <int32_t/>
        <int32_t/>
    </class-type>

    <class-type type-name='history_event_masterpiece_created_arch_constructst' inherits-from='history_event_masterpiece_createdst'>
        <int32_t/>
        <int16_t/>
        <int16_t/>
        <int32_t/>
        <int32_t/>
    </class-type>

    <class-type type-name='history_event_masterpiece_created_itemst'
                inherits-from='history_event_masterpiece_createdst'>
        <enum base-type='int32_t' name='skill_used' type-name='job_skill'/>
        <enum base-type='int16_t' name='item_type' type-name='item_type'/>
        <int16_t name='item_subtype' refers-to='(item-subtype-target $$._parent.item_type $)'/>
        <int16_t name='mat_type' ref-target='material' aux-value='$$.mat_index'/>
        <int16_t name='mat_index'/>
        <int32_t name='item_id' ref-target='item'/>
    </class-type>

    <class-type type-name='history_event_masterpiece_created_dye_itemst' inherits-from='history_event_masterpiece_createdst'>
        <int32_t/>
        <int16_t/>
        <int16_t/>
        <int16_t/>
        <int32_t/>
        <int32_t/>
        <int16_t/>
        <int32_t/>
    </class-type>

    <class-type type-name='history_event_masterpiece_created_item_improvementst' inherits-from='history_event_masterpiece_createdst'>
        <int32_t/>
        <int16_t/>
        <int16_t/>
        <int16_t/>
        <int32_t/>
        <int32_t/>
        <int16_t/>
        <int32_t/>
        <int16_t/>
        <int32_t/>
        <int32_t/>
        <int16_t/>
    </class-type>

    <class-type type-name='history_event_masterpiece_created_foodst'
                inherits-from='history_event_masterpiece_createdst'>
        <int32_t name='unk1'/>
        <int16_t name='item_subtype' refers-to='$global.world.raws.itemdefs.food[$]'/>
        <int32_t name='item_id' ref-target='item'/>
    </class-type>

    <class-type type-name='history_event_masterpiece_created_engravingst'
                inherits-from='history_event_masterpiece_createdst'>
        <int32_t name='skill_rating' comment='at the moment of creation'/>
        <int32_t name='type'/>
        <int16_t name='subtype'/>
    </class-type>

    <class-type type-name='history_event_masterpiece_lostst' inherits-from='history_event'>
        <int32_t/>
        <int32_t comment='uninitialized'/>
        <int32_t comment='uninitialized'/>
        <int32_t comment='uninitialized'/>
    </class-type>

    <class-type type-name='history_event_change_hf_statest' inherits-from='history_event'>
        <int32_t name='hfid' ref-target='historical_figure'/>
        <int16_t/>
        <int32_t/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='region' ref-target='world_region'/>
        <int32_t/>
        <compound name='region_pos' type-name='coord2d'/>
    </class-type>

    <class-type type-name='history_event_change_hf_jobst' inherits-from='history_event'>
        <int32_t name='hfid' ref-target='historical_figure'/>
        <enum base-type='int16_t' name='new_job' type-name='profession'/>
        <enum base-type='int16_t' name='old_job' type-name='profession' comment='maybe'/>
        <int32_t name='site' ref-target='world_site'/>
        <int32_t/>
        <int32_t/>
    </class-type>

    <class-type type-name='history_event_war_field_battlest' inherits-from='history_event'>
        <int32_t/>
        <int32_t/>
        <int32_t/>
        <int32_t/>
        <int16_t/>
        <int16_t/>
        <int32_t/>
        <int32_t/>
    </class-type>

    <class-type type-name='history_event_war_plundered_sitest' inherits-from='history_event'>
        <int32_t/>
        <int32_t/>
        <int32_t/>
        <int32_t/>
    </class-type>

    <class-type type-name='history_event_war_site_new_leaderst' inherits-from='history_event'>
        <int32_t/>
        <int32_t/>
        <int32_t/>
        <int32_t/>
        <int32_t/>
        <int32_t/>
        <int32_t/>
        <int32_t/>
        <int32_t/>
    </class-type>

    <class-type type-name='history_event_war_site_tribute_forcedst' inherits-from='history_event'>
        <int32_t/>
        <int32_t/>
        <int32_t/>
        <int32_t/>
    </class-type>

    <class-type type-name='history_event_war_site_taken_overst' inherits-from='history_event'>
        <int32_t/>
        <int32_t/>
        <int32_t/>
        <int32_t/>
        <int32_t/>
    </class-type>

    <class-type type-name='history_event_body_abusedst' inherits-from='history_event'>
        <stl-vector/>
        <int32_t/>
        <int32_t/>
        <int32_t/>
        <int32_t/>
        <int32_t/>
        <int32_t/>
        <int16_t/>
        <int16_t/>
        <int16_t/>
        <int32_t/>
        <int32_t/>
        <int32_t/>
        <int32_t/>
    </class-type>

    <class-type type-name='history_event_hist_figure_abductedst' inherits-from='history_event'>
        <int32_t name='hfid' ref-target='historical_figure'/>
        <int32_t name='snatcher' ref-target='historical_figure'/>

        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='region' ref-target='world_region'/>
        <int32_t name='layer' ref-target='world_underground_region' comment='?'/>
    </class-type>

    <class-type type-name='history_event_item_stolenst' inherits-from='history_event'>
        <enum base-type='int16_t' name='item_type' type-name='item_type'/>
        <int16_t name='item_subtype' refers-to='(item-subtype-target $$._parent.item_type $)'/>

        <int16_t name='mattype' ref-target='material' aux-value='$$.matindex'/>
        <int32_t name='matindex'/>

        <int32_t/>
        <int32_t name='entity_id' ref-target='historical_entity'/>
        <int32_t name='hfid' ref-target='historical_figure'/>
        <int32_t name='site' ref-target='world_site'/>

        <int32_t/>
        <int32_t/>
        <int32_t/>

        <compound name='region_pos' type-name='coord2d'/>

        <int32_t/>
    </class-type>

    <class-type type-name='history_event_hf_razed_buildingst' inherits-from='history_event'>
        <int32_t/>
        <int32_t/>
        <int32_t/>
    </class-type>

    <class-type type-name='history_event_creature_devouredst' inherits-from='history_event'>
        <int32_t/>
        <int32_t comment='uninitialized'/>
        <int16_t comment='uninitialized'/>
        <int32_t/>
        <int32_t/>
        <int32_t/>
        <int32_t/>
        <int32_t/>
    </class-type>

    <class-type type-name='history_event_hist_figure_woundedst' inherits-from='history_event'>
        <int32_t name='victim' ref-target='historical_figure'/>
        <int32_t name='attacker' ref-target='historical_figure'/>
        <int32_t/>
        <int32_t/>
        <int32_t/>
        <int32_t/>
        <int16_t/>
        <int16_t/>
        <int16_t/>
        <int8_t/>
    </class-type>

    <class-type type-name='history_event_hist_figure_simple_battle_eventst' inherits-from='history_event'>
        <stl-vector name='side1'>
            <int32_t ref-target='historical_figure'/>
        </stl-vector>
        <stl-vector name='side2'>
            <int32_t ref-target='historical_figure'/>
        </stl-vector>

        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='region' ref-target='world_region'/>
        <int32_t name='layer' ref-target='world_underground_region' comment='?'/>

        <int16_t name='subtype'/>
    </class-type>

    <class-type type-name='history_event_created_world_constructionst' inherits-from='history_event'>
        <int32_t/>
        <int32_t/>
        <int32_t/>
        <int32_t/>
        <int32_t/>
        <int32_t/>
    </class-type>

    <class-type type-name='history_event_hist_figure_reunionst' inherits-from='history_event'>
        <stl-vector/>
        <stl-vector/>
        <int32_t/>
        <int32_t/>
        <int32_t/>
    </class-type>

    <class-type type-name='history_event_hist_figure_reach_summitst' inherits-from='history_event'>
        <stl-vector/>
        <int32_t/>
        <int32_t/>
        <int16_t/>
        <int16_t/>
    </class-type>

    <class-type type-name='history_event_hist_figure_travelst' inherits-from='history_event'>
        <stl-vector name='figures'>
            <int32_t ref-target='historical_figure'/>
        </stl-vector>
        <int32_t/>
        <int32_t/>
        <int32_t/>
        <int32_t/>
        <compound name='region_pos' type-name='coord2d'/>
    </class-type>

    <class-type type-name='history_event_hist_figure_new_petst' inherits-from='history_event'>
        <stl-vector name='figures'>
            <int32_t ref-target='historical_figure'/>
        </stl-vector>
        <stl-vector name='pets'>
            <int16_t ref-target='creature_raw'/>
        </stl-vector>

        <int32_t name='site' ref-target='world_site'/>
        <int32_t name='region' ref-target='world_region'/>
        <int32_t name='layer' ref-target='world_underground_region' comment='?'/>

        <compound name='region_pos' type-name='coord2d'/>
    </class-type>

    <class-type type-name='history_event_assume_identityst' inherits-from='history_event'>
        <int32_t/>
        <int32_t/>
        <int32_t/>
    </class-type>

    <class-type type-name='history_event_create_entity_positionst' inherits-from='history_event'>
        <int32_t/>
        <int32_t/>
        <int32_t/>
        <int32_t/>
        <int16_t/>
    </class-type>

    <class-type type-name='history_event_change_creature_typest' inherits-from='history_event'>
        <int32_t/>
        <int32_t/>
        <int32_t/>
        <int32_t/>
        <int32_t/>
        <int32_t/>
    </class-type>

    <class-type type-name='history_event_hist_figure_revivedst' inherits-from='history_event'>
        <int32_t/>
        <int32_t/>
        <int32_t/>
        <int32_t/>
        <int16_t/>
        <int32_t/>
    </class-type>

    <class-type type-name='history_event_hf_learns_secretst' inherits-from='history_event'>
        <int32_t/>
        <int32_t/>
        <int32_t/>
        <int32_t/>
        <int32_t/>
    </class-type>

    <class-type type-name='history_event_change_hf_body_statest' inherits-from='history_event'>
        <int32_t/>
        <int32_t/>
        <int32_t/>
        <int32_t/>
        <int32_t/>
        <int32_t/>
        <int32_t/>
    </class-type>

    <class-type type-name='history_event_hf_act_on_buildingst' inherits-from='history_event'>
        <int32_t/>
        <int32_t/>
        <int32_t/>
        <int32_t/>
    </class-type>

    <class-type type-name='history_event_hf_does_interactionst' inherits-from='history_event'>
        <int32_t/>
        <int32_t/>
        <int32_t/>
        <int32_t/>
        <int32_t/>
        <int32_t/>
        <int32_t/>
    </class-type>

    <class-type type-name='history_event_hf_confrontedst' inherits-from='history_event'>
        <int32_t/>
        <int32_t/>
        <int32_t/>
        <int32_t/>
        <int32_t/>
        <int32_t/>
        <int32_t/>
        <int32_t/>
        <int32_t/>
        <int32_t/>
    </class-type>

    <class-type type-name='history_event_entity_lawst' inherits-from='history_event'>
        <int32_t/>
        <int32_t/>
        <int32_t/>
        <int32_t/>
    </class-type>

    <class-type type-name='history_event_hf_gains_secret_goalst' inherits-from='history_event'>
        <int32_t/>
        <int32_t/>
    </class-type>

    <class-type type-name='history_event_artifact_storedst' inherits-from='history_event'>
        <int32_t name='artifact_id' ref-target='artifact_record'/>
        <int32_t name='unit_id' ref-target='unit'/>
        <int32_t name='hfid' ref-target='historical_figure'/>
        <int32_t name='site' ref-target='world_site'/>
    </class-type>

    <enum-type type-name='history_event_collection_type'>
        <enum-item name='WAR'/>
        <enum-item name='BATTLE'/>
        <enum-item name='DUEL'/>
        <enum-item name='SITE_CONQUERED'/>
        <enum-item name='ABDUCTION'/>
        <enum-item name='THEFT'/>
        <enum-item name='BEAST_ATTACK'/>
        <enum-item name='JOURNEY'/>
    </enum-type>

    <class-type type-name='history_event_collection' original-name='history_event_collectionst'
                instance-vector='$global.world.history.event_collections.all' key-field='id'>
        <stl-vector/>
        <stl-vector/>
        <int32_t/>
        <int32_t/>
        <int32_t/>
        <int32_t/>
        <df-flagarray/>
        <int32_t name='id'/>
        <virtual-methods>
            <vmethod ret-type='history_event_collection_type' name='getType'/>
            <vmethod name='generate_xml'>
                <pointer/>
                <pointer/>
            </vmethod>
            <vmethod name='write_file'> <pointer comment='file_compressorst'/> </vmethod>
            <vmethod name='read_file'>
                <pointer comment='file_compressorst'/>
                <int32_t name='loadversion'/>
            </vmethod>
            <vmethod/>

            <vmethod/>
            <vmethod/>
            <vmethod/>
            <vmethod/>
            <vmethod/>

            -- 10

            <vmethod/>
            <vmethod name='updateTime'/>
            <vmethod is-destructor='true'/>
        </virtual-methods>
    </class-type>

    <class-type type-name='history_event_collection_warst' inherits-from='history_event_collection'>
        <compound type-name='language_name'/>
        <stl-vector/>
        <stl-vector/>
        <compound name='unk'>
            <stl-vector/>
            <stl-vector/>
            <stl-vector/>
            <stl-vector/>
            <stl-vector/>
            <int32_t/>
            <stl-vector/>
            <stl-vector/>
            <stl-vector/>
            <stl-vector/>
            <int32_t/>
            <stl-vector/>
            <stl-vector/>
            <stl-vector/>
            <int32_t/>
        </compound>
    </class-type>

    <class-type type-name='history_event_collection_battlest' inherits-from='history_event_collection'>
        <compound type-name='language_name'/>
        <int32_t/>
        <int32_t/>
        <int32_t/>
        <int32_t/>
        <int16_t/>
        <int16_t/>
        <stl-vector/>
        <stl-vector/>
        <stl-vector/>
        <stl-vector/>
        <stl-vector/>
        <stl-vector/>
        <stl-vector/>
        <stl-vector/>
        <stl-vector/>
        <stl-vector/>
        <stl-vector/>
        <stl-vector/>
        <stl-vector/>
        <stl-vector/>
        <stl-vector/>
        <int32_t comment='uninitialized'/>
    </class-type>

    <class-type type-name='history_event_collection_duelst' inherits-from='history_event_collection'>
        <int32_t/>
        <int32_t/>
        <int32_t/>
        <int32_t/>
        <int16_t/>
        <int16_t/>
        <int32_t/>
        <int32_t/>
        <int32_t/>
        <int8_t/>
    </class-type>

    <class-type type-name='history_event_collection_site_conqueredst' inherits-from='history_event_collection'>
        <int32_t/>
        <int32_t/>
        <stl-vector/>
        <stl-vector/>
        <int32_t comment='uninitialized'/>
        <int32_t/>
    </class-type>

    <class-type type-name='history_event_collection_abductionst' inherits-from='history_event_collection'>
        <int32_t/>
        <int32_t/>
        <int32_t/>
        <int32_t/>
        <int16_t/>
        <int16_t/>
        <int32_t/>
        <int32_t/>
        <stl-vector/>
        <stl-vector/>
        <stl-vector/>
        <int32_t/>
    </class-type>

    <class-type type-name='history_event_collection_theftst' inherits-from='history_event_collection'>
        <int32_t/>
        <int32_t/>
        <int32_t/>
        <int32_t/>
        <int16_t/>
        <int16_t/>
        <int32_t/>
        <int32_t/>
        <stl-vector/>
        <stl-vector/>
        <stl-vector/>
        <stl-vector/>
        <stl-vector/>
        <stl-vector/>
        <stl-vector/>
        <stl-vector/>
        <stl-vector/>
        <stl-vector/>
        <stl-vector/>
        <stl-vector/>
        <stl-vector/>
        <int32_t/>
    </class-type>

    <class-type type-name='history_event_collection_beast_attackst' inherits-from='history_event_collection'>
        <int32_t/>
        <int32_t/>
        <int32_t/>
        <int32_t/>
        <int16_t/>
        <int16_t/>
        <int32_t/>
        <stl-vector/>
        <int32_t/>
    </class-type>

    <class-type type-name='history_event_collection_journeyst' inherits-from='history_event_collection'>
        <stl-vector/>
        <int32_t/>
    </class-type>

    <struct-type type-name='world_history'>
        dtor 8532fa0

        <stl-vector name='events'>
            <pointer type-name='history_event'/>
        </stl-vector>
        <stl-vector name='events2'>
            <pointer type-name='history_event'/>
        </stl-vector>

        <stl-vector name='figures'>
            <pointer type-name='historical_figure'/>
        </stl-vector>

        <stl-vector name='unk1' type-name='int32_t'/>
        <stl-vector name='unk2' type-name='int16_t'/>

        <int32_t/>
        <int32_t/>
        <int32_t/>
        <int32_t/>
        <stl-vector/>
        <stl-vector/>
        <stl-vector/>
        <stl-vector/>
        <stl-vector/>
        <stl-vector/>
        <bool/>
        <stl-vector/>
        <int32_t/>
        <int32_t/>
        <int32_t/>
    </struct-type>
</data-definition>

<!--
Local Variables:
indent-tabs-mode: nil
nxml-child-indent: 4
End:
-->
