<data-definition>
    <enum-type type-name='item_type' base-type='int16_t'>
        <enum-item name='NONE' value='-1'/>
        <enum-item name='BAR' comment='Bars, such as metal, fuel, or soap.'/>
        <enum-item name='SMALLGEM' comment='Cut gemstones usable in jewelers workshop'/>
        <enum-item name='BLOCKS' comment='Blocks of any kind.'/>
        <enum-item name='ORE' comment='Metal ore, including coal'/>
        <enum-item name='ROUGH' comment='Rough gemstones.'/>
        <enum-item name='STONE' comment='Raw mined stone.'/>
        <enum-item name='WOOD' comment='Wooden logs.'/>
        <enum-item name='DOOR' comment='Doors.'/>
        <enum-item name='FLOODGATE' comment='Floodgates.'/>
        <enum-item name='BED' comment='Beds.'/>
        <enum-item name='CHAIR' comment='Chairs and thrones.'/>
        <enum-item name='CHAIN' comment='Restraints.'/>
        <enum-item name='FLASK' comment='Flasks.'/>
        <enum-item name='GOBLET' comment='Goblets.'/>
        <enum-item name='INSTRUMENT' comment='Musical instruments.'/>
        <enum-item name='TOY' comment='Toys.'/>
        <enum-item name='WINDOW' comment='Glass windows.'/>
        <enum-item name='CAGE' comment='Cages.'/>
        <enum-item name='BARREL' comment='Barrels.'/>
        <enum-item name='BUCKET' comment='Buckets.'/>
        <enum-item name='ANIMALTRAP' comment='Animal traps.'/>
        <enum-item name='TABLE' comment='Tables.'/>
        <enum-item name='COFFIN' comment='Coffins.'/>
        <enum-item name='STATUE' comment='Statues.'/>
        <enum-item name='CORPSE' comment='Corpses. Does not have a material.'/>
        <enum-item name='WEAPON' comment='Weapons.'/>
        <enum-item name='ARMOR' comment='Armor and clothing worn on the upper body.'/>
        <enum-item name='SHOES' comment='Armor and clothing worn on the feet.'/>
        <enum-item name='SHIELD' comment='Shields and bucklers.'/>
        <enum-item name='HELM' comment='Armor and clothing worn on the head.'/>
        <enum-item name='GLOVES' comment='Armor and clothing worn on the hands.'/>
        <enum-item name='BOX' comment='Chests (wood), coffers (stone), boxes (glass), and bags (cloth or leather).'/>
        <enum-item name='BIN' comment='Bins.'/>
        <enum-item name='SAND' comment='Sand gathered from the river.'/>
        <enum-item name='ARMORSTAND' comment='Armor stands.'/>
        <enum-item name='WEAPONRACK' comment='Weapon racks.'/>
        <enum-item name='CABINET' comment='Cabinets.'/>
        <enum-item name='FIGURINE' comment='Figurines.'/>
        <enum-item name='AMULET' comment='Amulets.'/>
        <enum-item name='SCEPTER' comment='Scepters.'/>
        <enum-item name='AMMO' comment='Ammunition for hand-held weapons.'/>
        <enum-item name='CROWN' comment='Crowns.'/>
        <enum-item name='RING' comment='Rings.'/>
        <enum-item name='EARRING' comment='Earrings.'/>
        <enum-item name='BRACELET' comment='Bracelets.'/>
        <enum-item name='GEM' comment='Large gems.'/>
        <enum-item name='ANVIL' comment='Anvils.'/>
        <enum-item name='CORPSEPIECE' comment='Body parts. Does not have a material.'/>
        <enum-item name='REMAINS' comment='Dead vermin bodies. Material is a creature ID.'/>
        <enum-item name='MEAT' comment='Butchered meat. Material is a creature ID.'/>
        <enum-item name='FISH' comment='Prepared fish. Material is a creature ID.'/>
        <enum-item name='FISH_RAW' comment='Unprepared fish. Material is a creature ID.'/>
        <enum-item name='VERMIN' comment='Live vermin. Material is a creature ID.'/>
        <enum-item name='PET' comment='Tame vermin. Material is a creature ID.'/>
        <enum-item name='SEEDS' comment='Seeds from plants. Material is a plant ID.'/>
        <enum-item name='PLANT' comment='Plants. Material is a plant ID.'/>
        <enum-item name='SKIN_RAW' comment='Raw skins. Material is a creature ID.'/>
        <enum-item name='SKIN_TANNED' comment='Tanned skins. Material must be LEATHER'/>
        <enum-item name='BONES' comment='Bones. Material is a creature ID.'/>
        <enum-item name='SHELL' comment='Shells. Material is a creature ID.'/>
        <enum-item name='LEAVES' comment='Leaves, usually from quarry bushes. Material is a plant ID'/>
        <enum-item name='THREAD' comment='Thread gathered from webs or made at the farmers workshop.'/>
        <enum-item name='CLOTH' comment='Cloth made at the loom.'/>
        <enum-item name='TOTEM' comment='Skull totems.'/>
        <enum-item name='SKULL' comment='Skulls. Material is a creature ID.'/>
        <enum-item name='SHIRT' comment='Shirts. Obsoleted in version 0.22.107.21a'/>
        <enum-item name='PANTS' comment='Armor and clothing worn on the legs.'/>
        <enum-item name='CLOAK' comment='Cloaks. Obsoleted in version 0.22.107.21a'/>
        <enum-item name='BACKPACK' comment='Backpacks.'/>
        <enum-item name='QUIVER' comment='Quivers.'/>
        <enum-item name='CATAPULTPARTS' comment='Catapult parts.'/>
        <enum-item name='BALLISTAPARTS' comment='Ballista parts.'/>
        <enum-item name='SIEGEAMMO' comment='Siege engine ammunition.'/>
        <enum-item name='BALLISTAARROWHEAD' comment='Ballista arrow heads.'/>
        <enum-item name='TRAPPARTS' comment='Mechanisms.'/>
        <enum-item name='TRAPCOMP' comment='Trap components.'/>
        <enum-item name='EXTRACT' comment='Plant/creature extract.'/>
        <enum-item name='POTION' comment='Potions.'/>
        <enum-item name='DRINK' comment='Alcoholic drinks.'/>
        <enum-item name='POWDER_ORGANIC' comment='Powders such as flour, sugar, or dye.'/>
        <enum-item name='CHEESE' comment='Pieces of cheese.'/>
        <enum-item name='FOOD' comment='Prepared meals. Subtypes come from item_food.txt'/>
        <enum-item name='LIQUID_MISC' comment='Liquids such as water, lye, and extracts.'/>
        <enum-item name='COIN' comment='Coins.'/>
        <enum-item name='GLOB' comment='Fat, tallow, pastes/pressed objects, and small bits of molten rock/metal.'/>
        <enum-item name='ROCK' comment='Small rocks (usually sharpened and/or thrown in adventurer mode)'/>
    </enum-type>

    <class-type type-name='itemdef' original-name='itemdefst'>
        <stl-string name="id"/>
        <int16_t name="subtype"/>

        <code-helper name='describe'>$.id</code-helper>

        <virtual-methods>
            <vmethod name='parseRaws'>
                <pointer/>
                <pointer/>
                <pointer/>
            </vmethod>
            <vmethod name='categorize' comment='add to world.raws.itemdefs.whatever'/>
            <vmethod name='finalize' comment='calculate stuff like base value'/>
            <vmethod is-destructor='true'/>
        </virtual-methods>
    </class-type>

    <enum-type type-name='ammo_flags'>
        <enum-item name='HAS_EDGE_ATTACK'/>
    </enum-type>

    <class-type type-name='itemdef_ammost' inherits-from='itemdef'
                instance-vector='$global.world.raws.itemdefs.ammo'>
        <stl-string name="name"/>
        <stl-string name="name_plural"/>
        <stl-string name="ammo_class"/>

        <df-flagarray name='flags' index-enum='ammo_flags'/>

        <int32_t name="size" comment='divided by 10'/>
        <int32_t name="unk_84"/>

        <stl-vector name="attacks">
            <pointer/>
        </stl-vector>
    </class-type>

    <enum-type type-name='armor_general_flags'>
        <enum-item name='SOFT'/>
        <enum-item name='HARD'/>
        <enum-item name='METAL'/>
        <enum-item name='BARRED'/>
        <enum-item name='SCALED'/>
        <enum-item name='LEATHER'/>
        <enum-item name='SHAPED'/>
        <enum-item name='CHAIN_METAL_TEXT'/>

        <enum-item name='STRUCTURAL_ELASTICITY_WOVEN_THREAD'/>
        <enum-item name='STRUCTURAL_ELASTICITY_CHAIN_METAL'/>
        <enum-item name='STRUCTURAL_ELASTICITY_CHAIN_ALL'/>
    </enum-type>

    <struct-type type-name='armor_properties'>
        <df-flagarray name='flags' index-enum='armor_general_flags'/>
        <int32_t name="layer"/>
        <int16_t name="layer_size"/>
        <int16_t name="layer_permit"/>
        <int16_t name="coverage"/>
    </struct-type>

    <enum-type type-name='armor_flags'>
        <enum-item name='METAL_ARMOR_LEVELS'/>
    </enum-type>

    <class-type type-name='itemdef_armorst' inherits-from='itemdef'
                instance-vector='$global.world.raws.itemdefs.armor'>
        <stl-string name="name"/>
        <stl-string name="name_plural"/>
        <stl-string name="name_preplural"/>
        <stl-string name="material_placeholder"/>
        <int32_t name="value"/>
        <int8_t name="armorlevel"/>
        <int16_t name="ubstep"/>
        <int16_t name="lbstep"/>
        <int32_t name="material_size"/>

        <compound name='props' type-name='armor_properties'/>

        <df-flagarray name='flags' index-enum='armor_flags'/>
    </class-type>

    <class-type type-name='itemdef_foodst' inherits-from='itemdef'
                instance-vector='$global.world.raws.itemdefs.food'>
        <stl-string name="name"/>
        <int16_t name="level"/>
    </class-type>

    <enum-type type-name='gloves_flags'>
        <enum-item name='METAL_ARMOR_LEVELS'/>
    </enum-type>

    <class-type type-name='itemdef_glovesst' inherits-from='itemdef'
                instance-vector='$global.world.raws.itemdefs.gloves'>
        <stl-string name="name"/>
        <stl-string name="name_plural"/>
        <int32_t name="value"/>
        <int8_t name='armorlevel'/>
        <int16_t name="ubstep"/>
        <df-flagarray name='flags' index-enum='gloves_flags'/>
        <int32_t name="material_size"/>
        <compound name='props' type-name='armor_properties'/>
    </class-type>

    <enum-type type-name='helm_flags'>
        <enum-item name='METAL_ARMOR_LEVELS'/>
    </enum-type>

    <class-type type-name='itemdef_helmst' inherits-from='itemdef'
                instance-vector='$global.world.raws.itemdefs.helms'>
        <stl-string name="name"/>
        <stl-string name="name_plural"/>
        <int32_t name="value"/>
        <int8_t name='armorlevel'/>
        <df-flagarray name='flags' index-enum='helm_flags'/>
        <int32_t name="material_size"/>
        <compound name='props' type-name='armor_properties'/>
    </class-type>

    <enum-type type-name='instrument_flags'>
        <enum-item name='HARD_MAT'/>
    </enum-type>

    <class-type type-name='itemdef_instrumentst' inherits-from='itemdef'
                instance-vector='$global.world.raws.itemdefs.instruments'>
        <stl-string name="name"/>
        <stl-string name="name_plural"/>
        <df-flagarray name='flags' index-enum='instrument_flags'/>
    </class-type>

    <enum-type type-name='pants_flags'>
        <enum-item name='METAL_ARMOR_LEVELS'/>
    </enum-type>

    <class-type type-name='itemdef_pantsst' inherits-from='itemdef'
                instance-vector='$global.world.raws.itemdefs.pants'>
        <stl-string name="name"/>
        <stl-string name="name_plural"/>
        <stl-string name="name_preplural"/>
        <stl-string name="material_placeholder"/>
        <int32_t name="value"/>
        <int8_t name="armorlevel"/>
        <df-flagarray name='flags' index-enum='pants_flags'/>
        <int32_t name="material_size"/>
        <int16_t name="lbstep"/>

        <compound name='props' type-name='armor_properties'/>
    </class-type>

    <class-type type-name='itemdef_shieldst' inherits-from='itemdef'
                instance-vector='$global.world.raws.itemdefs.shields'>
        <stl-string name="name"/>
        <stl-string name="name_plural"/>
        <int32_t name="value"/>
        <int32_t name="blockchance"/>
        <int8_t name='armorlevel'/>
        <int16_t name="ubstep"/>
        <int32_t name="material_size"/>
    </class-type>

    <enum-type type-name='shoes_flags'>
        <enum-item name='METAL_ARMOR_LEVELS'/>
    </enum-type>

    <class-type type-name='itemdef_shoesst' inherits-from='itemdef'
                instance-vector='$global.world.raws.itemdefs.shoes'>
        <stl-string name="name"/>
        <stl-string name="name_plural"/>
        <int32_t name="value"/>
        <int8_t name='armorlevel'/>
        <int16_t name="ubstep"/>
        <df-flagarray name='flags' index-enum='shoes_flags'/>
        <int32_t name="material_size"/>

        <compound name='props' type-name='armor_properties'/>
    </class-type>

    <class-type type-name='itemdef_siegeammost' inherits-from='itemdef'
                instance-vector='$global.world.raws.itemdefs.siege_ammo'>
        <stl-string name="name"/>
        <stl-string name="name_plural"/>
        <stl-string name="ammo_class"/>
    </class-type>

    <enum-type type-name='toy_flags'>
        <enum-item name='HARD_MAT'/>
    </enum-type>

    <class-type type-name='itemdef_toyst' inherits-from='itemdef'
                instance-vector='$global.world.raws.itemdefs.toys'>
        <stl-string name="name"/>
        <stl-string name="name_plural"/>
        <df-flagarray name='flags' index-enum='toy_flags'/>
    </class-type>
    
    <enum-type type-name='trapcomp_flags'>
        <enum-item name='IS_SCREW'/>
        <enum-item name='IS_SPIKE'/>
        <enum-item name='WOOD'/>
        <enum-item name='METAL'/>
        <enum-item name='HAS_EDGE_ATTACK'/>
    </enum-type>

    <class-type type-name='itemdef_trapcompst' inherits-from='itemdef'
                instance-vector='$global.world.raws.itemdefs.trapcomps'>
        <stl-string name="name"/>
        <stl-string name="name_plural"/>
        <stl-string name="adjective"/>

        <int32_t name="size"/>
        <int32_t name="unk_7c"/>
        <int32_t name="hits"/>
        <int32_t name="material_size"/>

        <df-flagarray name='flags' index-enum='trapcomp_flags'/>

        <stl-vector name="attacks">
            <pointer/>
        </stl-vector>
    </class-type>

    <enum-type type-name='weapon_flags'>
        <enum-item name='CAN_STONE'/>
        <enum-item name='HAS_EDGE_ATTACK'/>
        <enum-item name='TRAINING'/>
    </enum-type>

    <class-type type-name='itemdef_weaponst' inherits-from='itemdef'
                instance-vector='$global.world.raws.itemdefs.weapons'>
        <stl-string name="name"/>
        <stl-string name="name_plural"/>
        <stl-string name="adjective"/>
        <int32_t name="size"/>
        <int32_t name="unk_7c"/>
        <int16_t name="skill_melee"/>
        <int16_t name="skill_ranged"/>
        <stl-string name="ranged_ammo"/>
        <int32_t name="two_handed"/>
        <int32_t name="minimum_size"/>
        <int32_t name="material_size"/>
        <df-flagarray name='flags' index-enum='weapon_flags'/>
        <stl-vector name="attacks">
            <pointer/>
        </stl-vector>
        <int32_t name="shoot_force"/>
        <int32_t name="shoot_maxvel"/>
    </class-type>
</data-definition>

<!--
Local Variables:
indent-tabs-mode: nil
nxml-child-indent: 4
End:
-->
