<data-definition>
    <enum-type type-name='region_property_type'>
        <enum-item name='elevation'/>
        <enum-item name='rainfall'/>
        <enum-item name='vegetation'/>
        <enum-item name='temperature'/>
        <enum-item name='evilness'/>
        <enum-item name='drainage'/>
        <enum-item/>
        <enum-item name='savagery'/>
        <enum-item/>
        <enum-item/>
        <enum-item/>
        <enum-item/>
        <enum-item/>
        <enum-item name='salinity'/>
        <enum-item/>
        <enum-item/>
        <enum-item/>
        <enum-item/>
        <enum-item/>
        <enum-item/>
        <enum-item/>
        <enum-item/>
        <enum-item/>
    </enum-type>

    <enum-type type-name="world_population_type">
        <enum-item name='Animal_Wildlife'/>
        <enum-item name='Animal_FishPond'/>
        <enum-item name='Animal_FishRiver'/>
        <enum-item name='Animal_FishCaveRiver'/>
        <enum-item name='Plant_River'/>
        <enum-item name='Plant_Swamp'/>
        <enum-item name='Plant_Forest'/>
        <enum-item name='Plant_Cave'/>
        <enum-item name='Animal_VerminEater'/>
        <enum-item name='Animal_VerminFlies'/>
        <enum-item name='Animal_VerminSwamper'/>
        <enum-item name='Animal_VerminCaveRiver'/>
        <enum-item name='Animal_LargeCaveRiver'/>
        <enum-item name='Animal_VerminChasm'/>
        <enum-item name='Animal_LargeChasm'/>
        <enum-item name='Animal_VerminLava'/>
        <enum-item name='Animal_LargeLava'/>
        <enum-item name='Animal_VerminSoil'/>
        <enum-item name='Animal_VerminSoilColony'/>
        <enum-item name='Animal_VerminGrounder'/>
        <enum-item name='Animal_FishOcean'/>
        <enum-item name='Tree_IndoorWet'/>
        <enum-item name='Tree_IndoorDry'/>
        <enum-item name='Tree_OutdoorWet'/>
        <enum-item name='Tree_OutdoorDry'/>
    </enum-type>

    <enum-type type-name="site_structure_type" base-type='int16_t'>
        <enum-item name='CraftShop'/>
        <enum-item name='WeaponsmithsShop'/>
        <enum-item name='ArmorsmithsShop'/>
        <enum-item name='GeneralStore'/>
        <enum-item name='FoodShop'/>
        <enum-item name='MeadHall'/>
        <enum-item name='Keep'/>
        <enum-item/>
        <enum-item/>
        <enum-item name='Ruin1'/>
        <enum-item name='Ruin2'/>
        <enum-item name='Ruin3'/>
        <enum-item name='Hovel'/>
        <enum-item name='Apartment'/>
        <enum-item name='ApartmentRoom'/>
    </enum-type>

    <struct-type type-name='site_structure'>
        <enum base-type='int16_t' name='type' type-name='site_structure_type'/>
        <int16_t/>
        <int32_t name='id'/>
    </struct-type>

    <struct-type type-name='world_population'>
        <enum base-type='int8_t' name='type' type-name='world_population_type'/>

        <compound is-union='true'>
            <int16_t name="race" ref-target='creature_raw'/>
            <int16_t name="plant" ref-target='matgloss_plant'/>
            <int16_t name="tree" ref-target='matgloss_wood'/>
        </compound>

        <int32_t name="count_min" init-value='30000'/>
        <int32_t name="count_max" init-value='30000'/>

        <int8_t name='flags'/>
    </struct-type>

    <struct-type type-name='world_site' key-field='id'
                 instance-vector='$global.world.world_data.sites'>
        <compound name='name' type-name='language_name'/>

        <code-helper name='describe'>(describe-obj $.name)</code-helper>

        <int32_t name="civ_id" ref-target='historical_entity'/>
        <int32_t name="owner1" ref-target='historical_entity'/>

        <enum base-type='int32_t' name="type">
            <enum-item name='PlayerFortress'/>
            <enum-item name='DarkFortress'/>
            <enum-item name='Cave'/>
            <enum-item name='MountainHalls'/>
            <enum-item name='ForestRetreat'/>
            <enum-item name='Town'/>
            <enum-item name='LostFortress'/>
            <enum-item name='Ruin'/>
        </enum>

        <compound name='pos' type-name='coord2d16'/>
        <compound name='pos2' type-name='coord2d16'/>

        <int32_t name="id"/>

        <stl-vector name="nemesis">
            <int32_t ref-target='nemesis_record'/>
        </stl-vector>
        <stl-vector type-name='int32_t'/>

        <int32_t/>
        <int32_t/>
        <df-flagarray name='flags'/>

        <stl-vector name='structures'>
            <pointer type-name='site_structure'/>
        </stl-vector>
        <int32_t name='next_structure_id'/>
    </struct-type>

    <struct-type type-name='world_region' key-field='id' instance-vector='$global.world.world_data.regions'>
        <compound name='name' type-name='language_name'/>
        <code-helper name='describe'>(describe-obj $.name)</code-helper>

        <int32_t name="id"/>
        <int32_t name="unk_64"/>

        <compound name='region_coords' type-name='coord2d16_path'/>

        <int32_t name="unk_88"/>
        <int32_t name="unk_8c"/>
        <int32_t name="unk_90"/>
        <int32_t name="unk_94"/>

        <stl-vector name='populations'>
            <pointer>
                <enum base-type='int16_t' name='type' type-name='world_population_type'/>
                <compound is-union='true'>
                    <int16_t name="race" ref-target='creature_raw'/>
                    <int16_t name="plant" ref-target='matgloss_plant'/>
                    <int16_t name="tree" ref-target='matgloss_wood'/>
                </compound>
            </pointer>
        </stl-vector>

        <static-array name="unk_a8" count="34">
            <int16_t/>
            <int16_t/>
        </static-array>

        <int8_t name="unk_130"/>
        <int8_t name="unk_131"/>
        <int8_t name="unk_132"/>
    </struct-type>

    <struct-type type-name='world_data'>
        <compound type-name='language_name' name='world_name'/>

        <static-array count='15' type-name='int8_t'/>
        <int32_t name='save_folder_number'/>
        <int32_t name='next_site_id'/>
        <int32_t/>
        <int16_t name='world_width'/>
        <int16_t name='world_height'/>
        <stl-vector>
            <pointer>
                <int16_t/>
                <int16_t/>
                <stl-vector type-name='int32_t'/>
            </pointer>
        </stl-vector>

        <df-flagarray name='flags'/>

        <compound name='history' type-name='world_history'/>

        <static-array count='9'>
            <stl-vector type-name='int32_t'/>
        </static-array>
        <int32_t/>
        <int32_t/>
        <int32_t/>

        <static-array count='3' type-name='int16_t'/>
        <static-array count='3' type-name='int16_t'/>
        <int32_t/>
        <int32_t/>
        <int32_t/>
        <int32_t/>
        <stl-vector>
            <pointer>
                <static-array count='3'>
                    <stl-vector>
                        <pointer>
                            <int16_t/>
                            <int16_t/>
                            <int16_t/>
                            <int16_t/>
                            <int8_t/>
                            <int32_t/>
                            <int32_t/>
                        </pointer>
                    </stl-vector>
                </static-array>
                <int32_t/>
                <int32_t/>
                <int32_t/>
            </pointer>
        </stl-vector>
        <stl-vector name="sites">
            <pointer type-name='world_site'/>
        </stl-vector>
        <stl-vector name="regions">
            <pointer type-name='world_region'/>
        </stl-vector>

        <pointer name="region_map" is-array='true'>
            <pointer is-array='true'>
                <pointer/>
                <stl-vector name="sites">
                    <pointer type-name='world_site'/>
                </stl-vector>
                <df-flagarray name='flags'/>
                <static-array name='properties' type-name='int16_t' count='23' index-enum='region_property_type'/>
                <int32_t name="region_id" ref-target='world_region'/>
            </pointer>
        </pointer>
    </struct-type>
</data-definition>

<!--
Local Variables:
indent-tabs-mode: nil
nxml-child-indent: 4
End:
-->
